<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib">
	
	<SolidColorBrush x:Key="ContextMenu.Separator" Color="#3d3d3d" />

	<SolidColorBrush x:Key="ContextMenu.Static.Background" Color="#2e2e2e" />
	<SolidColorBrush x:Key="ContextMenu.Static.Border" Color="#424242" />

	<SolidColorBrush x:Key="MenuItem.Static.Background" Color="#2e2e2e" />
	<SolidColorBrush x:Key="MenuItem.Static.Border" Color="Transparent" />

	<SolidColorBrush x:Key="MenuItem.MouseOver.Background" Color="#3d3d3d" />
	<SolidColorBrush x:Key="MenuItem.MouseOver.Border" Color="#707070" />

	<SolidColorBrush x:Key="MenuItem.HasItemsIndicator" Color="#d6d6d6" />
	<SolidColorBrush x:Key="MenuItem.Foreground" Color="#d6d6d6" />


	<Style TargetType="{x:Type ContextMenu}">
		<Setter Property="Background" Value="{DynamicResource ContextMenu.Static.Background}" />
		<Setter Property="BorderBrush" Value="{DynamicResource ContextMenu.Static.Border}" />
		<Setter Property="BorderThickness" Value="1" />
		<Setter Property="Padding" Value="1" />
		<Setter Property="SnapsToDevicePixels" Value="True" />
		<Setter Property="OverridesDefaultStyle" Value="True" />
		<Setter Property="Grid.IsSharedSizeScope" Value="true" />
		<Setter Property="HasDropShadow" Value="True" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type ContextMenu}">
					<Border x:Name="Border" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
						<StackPanel Margin="{TemplateBinding Padding}" IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<Style TargetType="{x:Type MenuItem}">
		<Setter Property="Background" Value="{DynamicResource MenuItem.Static.Background}" />
		<Setter Property="BorderBrush" Value="{DynamicResource MenuItem.Static.Border}" />
		<Setter Property="Foreground" Value="{DynamicResource MenuItem.Foreground}" />
		<Setter Property="BorderThickness" Value="1" />
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type MenuItem}">
					<Border x:Name="MainBorder" Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
						<Grid DataContext="{Binding PlacementTarget, RelativeSource={RelativeSource AncestorType=ContextMenu}}">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto" />
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="Auto" />
							</Grid.ColumnDefinitions>

							<ContentPresenter
								x:Name="Icon"
								Grid.Column="0"
								Width="{TemplateBinding FontSize}"
								Height="{TemplateBinding FontSize}"
								Margin="2 1.7 10 1.7"
								HorizontalAlignment="Center"
								VerticalAlignment="Center"
								ContentSource="Icon" />
							<ContentPresenter
								x:Name="Header"
								Grid.Column="1"
								Margin="0 0 7 0"
								VerticalAlignment="Center"
								ContentSource="Header" />
							<Path
								x:Name="HasItemsIndicator"
								Grid.Column="2"
								Margin="4 0 4 0"
								VerticalAlignment="Center"
								Data="M 0 0 L 4 4 L 0 8 Z"
								Fill="{DynamicResource MenuItem.HasItemsIndicator}"
								Visibility="Collapsed" />
							<Popup
								IsOpen="{TemplateBinding IsSubmenuOpen}"
								PopupAnimation="Fade"
								Focusable="False"
								Placement="Right"
								HorizontalOffset="4"
								VerticalOffset="-3">
								<Border
									Padding="1"
									BorderThickness="1"
									Background="{TemplateBinding Background}"
									BorderBrush="{DynamicResource ContextMenu.Static.Border}">
									<StackPanel Width="{TemplateBinding Width}" IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
								</Border>
							</Popup>
						</Grid>
					</Border>
					<ControlTemplate.Triggers>
						<Trigger Property="IsMouseOver" Value="True">
							<Setter TargetName="MainBorder" Property="Background" Value="{DynamicResource MenuItem.MouseOver.Background}" />
							<Setter TargetName="MainBorder" Property="BorderBrush" Value="{DynamicResource MenuItem.MouseOver.Border}" />
						</Trigger>
						<Trigger Property="HasItems" Value="True">
							<Setter TargetName="HasItemsIndicator" Property="Visibility" Value="Visible" />
						</Trigger>
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
		<Style.Triggers>
			<Trigger Property="IsEnabled" Value="False">
				<Setter Property="Opacity" Value="0.55" />
			</Trigger>
		</Style.Triggers>
	</Style>

	<Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
		<Setter Property="Background" Value="{DynamicResource ContextMenu.Separator}" />
		<Setter Property="Margin" Value="-6 3 2 3" />
	</Style>


</ResourceDictionary>